<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <title>SMS - main course</title>
    <!-- DataTables CSS -->
    <link href="http://cdn.bootcss.com/bootstrap/3.3.5/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="/js/datatables/css/jquery.dataTables.min.css">

    <!-- jQuery文件。务必在bootstrap.min.js 之前引入 -->
    <script src="//cdn.bootcss.com/jquery/1.11.3/jquery.min.js"></script>

    <!-- DataTables -->
    <script type="text/javascript" charset="utf8" src="/js/datatables/js/jquery.dataTables.js"></script>

    <script type="application/javascript">
        $(document).ready(function () {
            /*$('#table_id').dataTable({
             "ajax": "/business/list",
             "columns": [
             {"data": "businessId"},
             {"data": "realName"},
             {"data": "status"},
             {"data": "status"},
             {"data": "status"},
             {"data": "status","orderable": false}
             ]
             });*/
            var table = $('#table_id').DataTable({
                "bSortClasses": false,
                "ajax": "/order/new-order",
                "columns": [
                    {
                        "data": "orderId"
                    },
                    {
                        "data": "comments",
                    },
                    {
                        "data": "orderItemList", render: function (data, type, row, meta) {
                        var price = 0;
                        if (null == data) {
                            return null;
                        }
                        $.each(data, function (i, n) {
                            price += n["count"];
                        });
                        return '' + price;
                    }
                    },
                    {
                        "data": "comments"
                    },
                    {
                        "data": "comments"
                    },
                    {
                        "data": "comments",
                        "orderable": false,
                        render: function () {
                            var action = '<button style="margin-right: 10px" type="button" class="btn btn-primary">Accept</button>' +
                                    '<button type="button" class="btn btn-warning">Reject</button>';
                            return action;
                        }
                    }
                ]
            });

            $("#history").on("click", function () {
                table.ajax.url("/order/history-order").load();
            });

            $("#new").on("click", function () {
                table.ajax.url("/order/new-order").load();
            });

        });
    </script>
    <style>
        nav.navbar i {
            width: 30px;
        }
    </style>
</head>

<body>
<nav class="navbar navbar-default navbar-static-top">
    <div class="container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#main-nav">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="index.html">ADMIN</a>
        </div>
        <div class="collapse navbar-collapse" id="main-nav">
            <ul class="nav navbar-nav">
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button">Food <span
                            class="caret"></span></a>
                    <ul class="dropdown-menu">
                        <li><a href="mainCourse.html"><i class="glyphicon glyphicon-cutlery"></i>Main course</a></li>
                        <li><a href="sideDishes.html"><i class="glyphicon glyphicon-leaf"></i>Side dishes</a></li>
                        <li><a href="drink.html"><i class="glyphicon glyphicon-glass"></i>Drink</a></li>
                        <li role="separator" class="divider"></li>
                        <li><a href="newFood.html"><i class="glyphicon glyphicon-plus"></i>New</a></li>
                    </ul>
                </li>
                <!-- 订单管理-->
                <li>
                    <a href="order" role="button">Order</a>
                </li>
                <li><a href="package.html">Package</a></li>
            </ul>
            <ul class="nav navbar-nav navbar-right">
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button">{uname} <span
                            class="caret"></span></a>
                    <ul class="dropdown-menu">
                        <li><a href="../login.html"><i class="glyphicon glyphicon-log-out"></i>&emsp;Logout</a></li>
                    </ul>
                </li>
            </ul>
        </div>
    </div>
</nav>
<div class="container">
    <div>
        <div class="row">
            <ol class="breadcrumb">
                <li><a href="index.html">Home</a></li>
                <li class="active">Main course</li>
            </ol>
            <div class="col-xs-2">
                <ul class="nav nav-pills nav-stacked">
                    <li role="presentation" class="active"><a href="#" id="new" ><i class="glyphicon glyphicon-fire"></i>&emsp;New
                        Order</a>
                    </li>
                    <li role="presentation"><a href="#" id="history"><i  class="glyphicon glyphicon-cutlery"></i>&emsp;Order
                        history</a>
                    </li>
                </ul>
            </div>
            <div class="col-xs-10">
                <table id="table_id" class="display">
                    <thead>
                    <tr>
                        <th>OrderId</th>
                        <th>Customer</th>
                        <th>Price</th>
                        <th>Picture</th>
                        <th>Status</th>
                        <th>Action</th>
                    </tr>
                    </thead>
                    <tfoot>
                    <tr>
                        <th>OrderId</th>
                        <th>Customer</th>
                        <th>Price</th>
                        <th>Picture</th>
                        <th>Status</th>
                        <th>Action</th>
                    </tr>
                    </tfoot>
                </table>
            </div>
        </div>
    </div>
</div>

</body>

</html>